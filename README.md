## MCDA——Minecraft Dynamic Architect

**——为原版动画建筑设计的结构编辑器**

作者：[奈茶泡芙](https://github.com/furina2024)

### 前言：什么是动态建筑

在基岩版我的世界里，方块移动时会变成 movingblock，简称 mb，并在这个状态下保持 2gt。这两 gt 里，方块的所有信息会被记录在 mb 的方块实体里（游戏中记录方块特殊信息的一个容器）。

相信有足够游戏经历的玩家都会发现，方块在移动的时候也是会正常显示的。这意味着，即使方块不存在于世界上了，它被记录到了一个 mb 里面，mb 的方块实体里面，就能正常显示。这说明，方块可以通过 mb 的方块实体去显示。

mb 方块实体中记录的方块在游戏中显示的位置是由活塞（mb 方块实体里会记录一个活塞的位置）决定的。活塞朝哪个方向，记录的方块就能在那个方向根据活塞的伸缩状态移动一格。这为动态建筑奠定了基础。

另一个重要的特性是 mb 的可嵌套性。mb 的方块实体内部会记录自己移动的方块实体，这个方块实体可以为 mb 再记录一个方块。当渲染时，这个渲染会形成一个类似递归的东西层层渲染下去。

这整个过程是可以在纯生存中做出来的（很复杂），不过本编辑器主要面向创造建筑玩家，在此就不赘述了。

### 功能 1：结构转换

本编辑器中点击导入结构选中你想要转换的结构文件（必须是 mcstructure 文件），点击导入结构，导入进来就转换成了 mb 方块实体的嵌套形式。这时点导出结构选择一个文件夹就能导出一个基本的“mb 投影”，它由一个含 mb 方块实体的玻璃和一组控制它方向的活塞组成，激活全部活塞并移动玻璃就可以看到展开的投影。如果想要投影一直显示，可以在保存时点击“保留为 MB”，但这会使投影的位置受限制（玻璃可以移动到任何位置再变成 mb，但是一开始就是 mb 就不行了）。也可以通过几种原版的保留 mb 的方法

要注意的是，左上角的“设置解析模式”里面规定了你要以什么方式去解析结构。“最小路径解析”程序会寻找一条最小的能连接起所有方块的线并生成 mb 嵌套结构，这能最大程度的利用空间（一个 mb 最多嵌套 600 个左右，再多会因为太多渲染同时进行而崩掉游戏）但是线段会很不规则。“全位置遍历解析”会遍历整个结构的长方形范围。

### 功能 2：编辑结构

点选一个你想要编辑的结构（从表格里），点击进编辑结构窗口。在上面输入你想要编辑的深度（mb 套娃，编辑第几层就是第几个方块），在下方搜索方块栏中搜索一个方块的英文名以获取方块 NBT 模板，点击树状图上的值就可以编辑。编辑完了保存

### 功能 3：合并结构

这个功能能实现将多个 mb 嵌套结构合并在一起，并由多组不同的活塞控制多个不同的结构（即使合并在了一起）。在下面的拉选栏里选择想要合并的结构点“+”，然后点击保存便可合并

### 功能 4：嵌套结构

这个功能的操作和合并结构一样，区别在于合并完的结构由统一的一组活塞控制，而不是多组

### 功能 5：移动结构

点进“移动结构”窗口，选择你要移动的结构。在右边的输入采样点栏中输入建筑移动轨迹经过的点的三维坐标，程序会生成一条曲线将你输入的点连接起来，点击保存即可。

导出结构注意事项：如果结构嵌套超过了 600 层（也就是 600 个方块），后面的结构会自动被删掉，防止游戏崩溃
